<?xml version="1.0" encoding="UTF-8"?>

<!-- A first cut at describing the P3 INDS system using Bill Finger's INDS Execution Manager schema.                 -->
<!-- Only the RBNB Server is started in a separate directory; all other processes are started in the base directory. -->

<startup xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://whf/schema/inds_startup.xsd">
	
	<!-- Tomcat -->
	<tomcat logFile="tommy.log">
		<input type="tcp" port="localhost:80" />
	</tomcat>
	
	<!-- Server -->
	<del initialDirectory="Server" file="rbnb.log"/>
	<dataTurbine 
			jvmMaxHeap="1024M" 
			initialDirectory="Server" 
			logFile="rbnb.log" name="INDS" address=":3333"/>
	<sleep duration_ms="1500"/>
	
	<!-- Delete all the log files -->
	<del file="*.log"/>
	
	<!-- Jobs/KMLTrack -->
	<trackKML logFile="TrackKMLDC8.log" consolidateResponse="true" noGUI="true" configFile="TrackKMLConfigDC8.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackKML_DC8" />
	</trackKML>
	<trackKML logFile="TrackKMLP3B.log" consolidateResponse="true" noGUI="true" configFile="TrackKMLConfigP3B.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackKML_P3B" />
	</trackKML>
	<trackKML logFile="TrackKMLB200.log" consolidateResponse="true" noGUI="true" configFile="TrackKMLConfigB200.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackKML_B200" />
	</trackKML>
	<trackKML logFile="TrackKMLNOAAP3.log" consolidateResponse="true" noGUI="true" configFile="TrackKMLConfigNOAAP3.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackKML_NOAAP3" />
	</trackKML>
	<trackKML logFile="TrackKMLCV580.log" consolidateResponse="true" noGUI="true" configFile="TrackKMLConfigCV580.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackKML_CV580" />
	</trackKML>
	<trackKML logFile="TrackKMLTwinOtter.log" consolidateResponse="true" noGUI="true" configFile="TrackKMLConfigTwinOtter.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackKML_TwinOtter" />
	</trackKML>
	<trackData logFile="TrackDataDC8.log" noGUI="true" configFile="TrackDataConfigDC8.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackData_DC8" />
	</trackData>
	<trackData logFile="TrackDataP3B.log" noGUI="true" configFile="TrackDataConfigP3B.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackData_P3B" />
	</trackData>
	<trackData logFile="TrackDataB200.log" noGUI="true" configFile="TrackDataConfigB200.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackData_B200" />
	</trackData>
	<trackData logFile="TrackDataNOAAP3.log" noGUI="true" configFile="TrackDataConfigNOAAP3.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackData_NOAAP3" />
	</trackData>
	<trackData logFile="TrackDataCV580.log" noGUI="true" configFile="TrackDataConfigCV580.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackData_CV580" />
	</trackData>
	<trackData logFile="TrackDataTwinOtter.log" noGUI="true" configFile="TrackDataConfigTwinOtter.txt">
	    <plugin type="rbnb" port="localhost:3333" name="TrackData_TwinOtter" />
	</trackData>
	<sleep duration_ms="200"/>
	
	<!-- Jobs/TimeDrive -->
	<timeDrive logFile="timedrive.log" multiUserMode="ip">
	    <input type="tcp" port="4000"/>
	    <output type="tcp" port="localhost:80"/>
	</timeDrive>
	<sleep duration_ms="200"/>
	
	<!-- Jobs/PlugIns -->
	<png width="320" height="200">
	    <plugin type="rbnb" port="localhost:3333" name="PNGPlugIn" />
	</png>
	<sleep duration_ms="100"/>
	<toString>
	    <plugin type="rbnb" port="localhost:3333" name="ToString" />
	</toString>
	<sleep duration_ms="100"/>
	<thumbNail scale="0.5" quality="0.9" maxImages="10">
	    <plugin type="rbnb" port="localhost:3333" name="ThumbNail" />
	</thumbNail>
	<sleep duration_ms="500"/>
	
	<!-- DC8 project -->
	<xmlDemux logFile="IWG1DemuxDC8.log"  silentMode="true" 
			chanNameFromID="true" xmlFile="IWG1_GTR_OUT_DC8.XML"  >
		<input type="rbnb" port="localhost:3333" channel="DC8-5000-cap/UDP" />
		<output type="rbnb" port="localhost:3333"
				cacheFrames="200" archiveFrames="1000000" 
				overwriteArchive="true" />
	</xmlDemux>
	<sleep duration_ms="100"/>
	
	<!-- P3B project -->
	<xmlDemux logFile="IWG1DemuxP3B.log" silentMode="true" chanNameFromID="true" xmlFile="IWG1_INDS_OUT_P3B.XML">
	    <input type="rbnb" port="localhost:3333" channel="P3B-5700-cap/UDP"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="200" archiveFrames="1000000" overwriteArchive="true"/>
	</xmlDemux>
	<sleep duration_ms="100"/>
	<xmlDemux logFile="HskpngDemuxP3B.log" silentMode="true" chanNameFromID="true" xmlFile="SCAN_GTR_OUT_P3B.XML">
	    <input type="rbnb" port="localhost:3333" channel="P3B-5750-cap/UDP"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="200" archiveFrames="1000000" overwriteArchive="true"/>
	</xmlDemux>
	<sleep duration_ms="200"/>
	
	<!-- B200 project -->
	<csvDemux logFile="CSVDemuxB200.log" dateFormat="yyyyMMdd\'T\'HHmmss" silentMode="true" checkEmbeddedTimestamp="true" xmlFile="B200.xml">
	    <input type="rbnb" port="localhost:3333" channel="B200/B200_ASR_reduced.txt"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="200" archiveFrames="1000000" overwriteArchive="true"/>
	</csvDemux>
	<sleep duration_ms="100"/>
	
	<!-- NOAA P3 project -->
	<csvDemux logFile="CSVDemuxNOAAP3.log" dateFormat="yyyyMMdd\'T\'HHmmss" silentMode="true" checkEmbeddedTimestamp="true" xmlFile="NOAA_P3.xml">
	    <input type="rbnb" port="localhost:3333" channel="NOAA_P3/WP3D.txt"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="200" archiveFrames="1000000" overwriteArchive="true"/>
	</csvDemux>
	<sleep duration_ms="100"/>
	
	<!-- CV580 project -->
	<csvDemux logFile="CSVDemuxCV580.log" dateFormat="yyyyMMdd\'T\'HHmmss" silentMode="true" checkEmbeddedTimestamp="true" xmlFile="CV580.xml">
	    <input type="rbnb" port="localhost:3333" channel="CV580/_CSV"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="200" archiveFrames="1000000" overwriteArchive="true" name="CV580_IWG1"/>
	</csvDemux>
	<sleep duration_ms="100"/>
	
	<!-- Twin Otter project -->
	<csvDemux logFile="TwinOtterDemux.log" dateFormat="yyyy-MM-dd\'T\'HH:mm:ss\'Z\'" silentMode="true" checkEmbeddedTimestamp="true" xmlFile="TwinOtter.xml">
	    <input type="rbnb" port="localhost:3333" channel="P3B-5800-cap/UDP"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="200" archiveFrames="1000000" overwriteArchive="true"/>
	</csvDemux>
	<deadReckoning logFile="DeadReckoning.log" maxLatency_sec="1800"/>
	
	<sleep duration_ms="500"/>
	
	<!-- Capture, HttpMonitor -->
	<httpMonitor logFile="HttpMon_MSFC.log" configFile="HttpMon_MSFC.xml"/>
	<sleep duration_ms="100"/>
	<httpMonitor logFile="HttpMon_B200.log" configFile="HttpMon_B200.xml"/>
	<sleep duration_ms="100"/>
	<httpMonitor logFile="HttpMon_DC8.log" configFile="HttpMon_DC8.xml"/>
	<sleep duration_ms="100"/>
	<httpMonitor logFile="HttpMon_DIAL.log" configFile="HttpMon_DIAL.xml"/>
	<sleep duration_ms="100"/>
	<httpMonitor logFile="HttpMon_CV580.log" configFile="HttpMon_CV580.xml"/>
	<sleep duration_ms="100"/>
	<httpMonitor logFile="HttpMon_NOAA_P3.log" configFile="HttpMon_NOAA_P3.xml"/>
	<sleep duration_ms="100"/>
	
	<!-- Capture, UDPcapture -->
	<udpCapture logFile="P3B-5700-cap.log">
	    <input type="udp" port="5700"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="10" archiveFrames="8640000" overwriteArchive="true" name="P3B-5700-cap"/>
	</udpCapture>
	<udpCapture logFile="P3B-5750-cap.log">
	    <input type="udp" port="5750"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="10" archiveFrames="8640000" overwriteArchive="true" name="P3B-5750-cap"/>
	</udpCapture>
	<udpCapture logFile="P3B-5800-cap.log">
	    <input type="udp" port="5800"/>
	    <output type="rbnb" port="localhost:3333" cacheFrames="10" archiveFrames="8640000" overwriteArchive="true" name="P3B-5800-cap"/>
	</udpCapture>
	<sleep duration_ms="100"/>

</startup>






